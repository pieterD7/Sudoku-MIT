import{n as q,w as E,v as C,o as h,c as d,a as z,H as F,b as l,t as p,d as O,e as _,f as B,r as S,g as x,h as U,i as V,F as k,j as N,k as M,K as W,l as $}from"./vendor.94885de0.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};j();class H{constructor(e={}){this.popupWidth=0,this.popupHeight=0,this.config=e,this.last=null,this.el=null,this.index=0,window.addEventListener("beforeunload",()=>{localStorage.setItem("tour","1")}),window.addEventListener("resize",()=>{this.last&&this.last()}),document.querySelector("body").addEventListener("keyup",t=>{t.key=="ArrowRight"?this.next():t.key=="ArrowLeft"&&this.prev()})}setParams(e,t){this.popupWidth=e,this.popupHeight=t}getParam(e,t){if(this.config[e])return this.config[e][t]}next(){let e=this.index;e++,e%=Object.keys(this.config).length,this.config[e]&&this.explain(this.el,e)}prev(){let e=this.index;e--,e<0&&(e=Object.keys(this.config).length-1),this.config[e]&&this.explain(this.el,e)}getTourId(e){return this.config.find((s,o)=>{if(o==e)return s})["tour-id"]}getPosition(e){if(this.config[e]){let t=this.getTourId(e),s=document.querySelector("[tour-id='"+t+"']");if(s)return s.getBoundingClientRect()}}getOrientation(e){let t=!1,s=!1,o=!1,n=!1,r=window.screen;return r.width<e.x+this.popupWidth/2?s=!0:e.x+e.width<this.popupWidth/2&&(t=!0),r.height/2>e.y?n=!0:o=!0,{left:t,right:s,bottom:o,top:n}}explain(e,t){this.last=()=>{let s=this.getParam(t,"left"),o=this.getParam(t,"top"),n=this.getPosition(t),r=this.getParam(t,"hide"),a=this.getParam(t,"show");if(this.el=e,this.index=t,n&&e){let c=document.querySelector(a);c&&c.setAttribute("style","");let f=document.querySelector(r);f&&f.setAttribute("style","visibility:hidden;");let u=e.querySelector(".txt");u&&(u.innerHTML=this.getParam(t,"txt")+'<br/><br/><span id="nextTour">I got it.</span>');let v=e.getBoundingClientRect();document.querySelector("#nextTour").addEventListener("click",()=>{this.next()});let m=this.getOrientation(n);m.top?(e.querySelector(".top").classList.remove("hide"),e.querySelector(".bottom").classList.add("hide")):m.bottom&&(e.querySelector(".bottom").classList.remove("hide"),e.querySelector(".top").classList.add("hide")),e.querySelector(".top").classList.remove("left"),e.querySelector(".top").classList.remove("right"),e.querySelector(".bottom").classList.remove("left"),e.querySelector(".bottom").classList.remove("right"),m.right?(e.querySelector(".top").classList.add("right"),e.querySelector(".bottom").classList.add("right")):m.left&&(e.querySelector(".top").classList.add("left"),e.querySelector(".bottom").classList.add("right"));let w="left:"+(n.left+n.width/2+s-this.popupWidth/2)+"px;",g="top:"+(n.bottom+o)+"px;";m.right?w="right:0px;":m.left&&(w="left:0px;"),m.bottom&&(g="top:"+(n.top-v.height-o)+"px;"),e.setAttribute("style",g+w)}},this.last()}}var K={tour:H};var y=(i,e)=>{const t=i.__vccOpts||i;for(const[s,o]of e)t[s]=o;return t};const G={data(){return{showTour:!1,tour:new K.tour([{"tour-id":1,txt:"Undo last move",left:0,top:20,hide:".dialog"},{"tour-id":2,txt:"Redo last undone move",left:0,top:20},{"tour-id":3,txt:"Start a new game",left:0,top:20},{"tour-id":4,txt:"Refresh to the beginning and undo all moves",left:0,top:20},{"tour-id":6,txt:"Pauze",left:0,top:20},{"tour-id":7,txt:"Settings",left:0,top:20},{"tour-id":"board",txt:"This is the board. Select a square and use the buttons or keyboard to enter a value.",left:-2,top:-240},{"tour-id":8,txt:"These are the possibilities to select from. Press-and-hold to enter letters.",left:0,top:0},{"tour-id":9,txt:"Make notes while you play after clicking here or press-and-hold a square. They will be automatically updated when you make a move.",left:0,top:0},{"tour-id":10,txt:"If you are not sure about a move, make a backup to restore later.",left:0,top:0},{"tour-id":11,txt:"Restore the last backup.",left:0,top:0,hide:".dialog"},{"tour-id":12,txt:"Take a tour around the interface.",left:0,top:10,show:".dialog"},{"tour-id":13,txt:"The difficulty of the Sudoku.",left:0,top:-20,show:".dialog"},{"tour-id":14,txt:"Play Sudoku!",left:0,top:10,show:".dialog"},{"tour-id":15,txt:"Create a Sudoku and see if the computer can crack it.",left:0,top:10,show:".dialog"}])}},methods:{show(){this.showTour=!0},hide(){this.showTour=!1;let i=document.querySelector(".dialog");i&&i.setAttribute("style","")},hadTour(){return!!localStorage.getItem("tour")},setTourParms(i,e){this.tour.setParams(i,e)},initTour(i){this.showTour?this.hide():(this.setTourParms(200,0),this.tour.explain(this.$el,i),this.show())}},mounted(){q(()=>{setTimeout(()=>{this.hadTour()||this.initTour(11)},500)})}},J={class:"popup"},X=z('<div class="top"><div class="arrow arrow-up"></div></div><div class="txt"></div><br><div class="bottom right"><div class="arrow arrow-down"></div></div>',4),Y=[X];function Z(i,e,t,s,o,n){return E((h(),d("div",J,Y,512)),[[C,o.showTour]])}var Q=y(G,[["render",Z]]);class ee{constructor(e,t=!0){this.tiles=e,this.difficulty=0,this.notes=[],t&&(this.notes=this.makeNotes())}getTile(e,t){let s=null;return this.tiles.forEach(o=>{o.row==e&&o.column==t&&(s=o)}),s}getCell(e){let t=[];return this.tiles.forEach(s=>{s.cell==e&&t.push(s)}),t}getRow(e){let t=[];for(let s=1;s<10;s++)t.push(this.getTile(e,s));return t}getColumn(e){let t=[];for(let s=1;s<10;s++)t.push(this.getTile(s,e));return t}makeNotes(){let e=[],t=729,s=81*9-1,o=1,n=[0,0];for(e=this.interpretNotes1(this.gatherNotes(e));o>0;)e=this.interpretNotes1(e),s=this.countPossibilities(e),o=t-s,n[0]+=o,o==0&&(e=this.interpretNotes2(e),o=s-this.countPossibilities(e),n[1]+=o),t=s;return t==0?this.difficulty=this.calcDifficulty(n[0],n[1]):this.difficulty=-1,e}calcDifficulty(e,t){return Math.round((e+100*t)/(e+t))}countPossibilities(e){let t=0;return e.forEach(s=>{s.notes.length>1&&(t+=s.notes.length-1)}),t}gatherNotes(e){let t=[];for(let s=0;s<9;s++)t.push(this.getCell(s));return t.forEach(s=>{s.forEach(o=>{typeof o.index!="number"&&e.push({cell:o.cell,row:o.row,column:o.column,notes:this.missing(s)})})}),e}interpretNotes1(e){let t=[];for(let a=1;a<10;a++)t.push(this.getRow(a));t.forEach((a,c)=>{let f=[];a.forEach(u=>{typeof u.index=="number"&&f.push(u.index)}),e.forEach(u=>{f.forEach(v=>{u.row==c+1&&u.notes.indexOf(v)>-1&&u.notes.splice(u.notes.indexOf(v),1)})})});let s=[];for(let a=1;a<10;a++)s.push(this.getColumn(a));s.forEach((a,c)=>{let f=[];a.forEach(u=>{typeof u.index=="number"&&f.push(u.index)}),e.forEach(u=>{f.forEach(v=>{u.column==c+1&&u.notes.indexOf(v)>-1&&u.notes.splice(u.notes.indexOf(v),1)})})});let o=[1,2,3,4,5,6,7,8,9],n=[];return o.forEach(a=>{let c=this.notesCol(e,a);c.forEach(f=>{f.notes.forEach(u=>{this.unique(c,u)&&n.push({cell:f.cell,row:f.row,column:f.column,index:u})})})}),o.forEach(a=>{let c=this.notesRow(e,a);c.forEach(f=>{f.notes.forEach(u=>{this.unique(c,u)&&n.push({cell:f.cell,row:f.row,column:f.column,index:u})})})}),n.forEach(a=>{this.unsetOthers(e,a)}),this.found(e).forEach(a=>{let c=this.notesRow(e,a.row);c.forEach(f=>{a.column!=f.column&&this.removeFromArray(f.notes,a.notes)}),c=this.notesCol(e,a.column),c.forEach(f=>{a.row!=f.row&&this.removeFromArray(f.notes,a.notes)})}),e}interpretNotes2(e){if(this.pass>0)return e;for(let t=1;t<10;t++){let s=this.notesCell(e.concat(),t-1),o=this.characteristics(s);s=this.addIndexToNotes(s,2,t-1),this.found(s).length<9&&o.forEach(n=>{n.col,n.row}),s=this.notesRow(e.concat(),t),o=this.characteristics(s),s=this.addIndexToNotes(s,0,t),this.found(s).length<9&&o.forEach(n=>{n.cell}),s=this.notesCol(e.concat(),t),o=this.characteristics(s),s=this.addIndexToNotes(s,1,t),this.found(s).length<9&&o.forEach(n=>{n.cell}),s=this.notesCell(e.concat(),t-1),o=[],o=this.threeTwoTwo(s),o.length>0&&this.found(s).length<9&&o.forEach(n=>{this.removeFromCell(e,n.row,n.column,n.cell,n.notes)})}for(let t=1;t<10;t++)for(let s=0;s<9;s++){let o=this.notesCell(e,t),n=this.findDigitInNotes(o,s);n.length==1&&(n[0].notes=[s])}return e}isValid(e){let t=!0;return e.forEach(s=>{let o=this.getTile(s.row,s.column);s.notes.length==0&&typeof o.index!="number"&&(t=!1)}),t}unsetCell(e){this.getCell(e).forEach(s=>{s.index=""})}setCell(e){let t=this.getCell(e),s=[0,1,2,3,4,5,6,7,8],o=[],n=-1,r=0;r=0;let a=0;for(o=s.concat();o.length>0&&typeof t[r]!="undefined"&&a<200;)if(n=Math.round(Math.random()*(o.length-1)),a++,typeof o[n]!="undefined"&&this.isPossible(t[r],o[n],this.makeNotes())){let c=t[r++];c.index=o[n],o.splice(n,1)}return a<200}removeIndex(){let e=-1,t=-1,s=null,o="";for(;;)if(e=Math.round(Math.random()*8)+1,t=Math.round(Math.random()*8)+1,s=this.getTile(e,t),o="",typeof s.index=="number"){o=s.index,s.index="";break}return{row:e,col:t,index:o}}makeHints(e,t){let s=[],o=!0;for(let n=0;n<e;n++)s.push(this.removeIndex());return this.makeNotes(),(this.difficulty>t+.5||this.difficulty<t)&&s.forEach(n=>{let r=this.getTile(n.row,n.col);r.index=n.index,o=!1}),o}generate(e=1){for(let r=0;r<9;r++)this.unsetCell(r);let t=0,s=0;for(let r=0;r<9;r++)for(t=0;!this.setCell(r)&&t++<200;)this.unsetCell(r);let o=[28,26,24,22],n=81-o[e-1];for(;s++<200&&!this.makeHints(n,e););return s>198&&this.generate(e),this.tiles.forEach(r=>{typeof r.index=="number"&&(r.initialValue=!0)}),this.tiles}getNote(e,t,s){let o=null;return e.forEach(n=>{n.row==t&&n.column==s&&(o=n)}),o}isPossible(e,t,s){return this.getNote(s,e.row,e.column).notes.indexOf(t)>-1}addIndexToNotes(e,t,s){let o=[];return this.tiles.forEach(n=>{typeof n.index=="number"&&(t==0&&s==n.row||t==1&&s==n.column||t==2&&s==n.cell)&&(n.notes=[n.index],o.push(n))}),e.concat(o)}notesCell(e,t){let s=[];return e.forEach(o=>{o.cell==t&&(s=s.concat(o))}),s}notesRow(e,t){let s=[];return e.forEach(o=>{o.row==t&&(s=s.concat(o))}),s}notesCol(e,t){let s=[];return e.forEach(o=>{o.column==t&&(s=s.concat(o))}),s}unsetOthers(e,t){e.forEach(s=>{s.row==t.row&&s.column==t.column?s.notes=[t.index]:(t.cell==s.cell&&s.notes.indexOf(t.index)>-1||t.row==s.row&&s.notes.indexOf(t.index)>-1||t.row==s.row&&s.notes.indexOf(t.index)>-1)&&s.notes.splice(s.notes.indexOf(t.index),1)})}allOnRow(e){let t=null;return e.forEach(s=>{s.notes.forEach(o=>{typeof t=="object"?t=s.row:t!=s.row?t=-1:t>-1&&(t=s.row)})}),typeof t=="object"?-1:t}allOnColumn(e){let t=null;return e.forEach(s=>{s.notes.forEach(o=>{typeof t=="object"?t=s.column:t!=s.column?t=-1:t>-1&&(t=s.column)})}),typeof t=="object"?-1:t}findDigitInNotes(e,t){let s=[];return e.forEach(o=>{o.notes.indexOf(t)>-1&&s.push(o)}),s}findIndentical(e){let t=[];return e.forEach((s,o)=>{e.forEach((n,r)=>{this.identical(s.notes,n.notes)&&r<o&&!this.contains(t,s)&&(t.push(s),t.push(n))})}),t}contains(e,t){return typeof e.find(o=>{if(o.row==t.row&&o.column==t.column)return o})!="undefined"}found(e){let t=[];return e.forEach(s=>{s.notes.length==1&&t.push(s)}),t}found2(e){let t=[];return e.forEach(s=>{t.push(s.notes)}),t}missing(e){let t=[0,1,2,3,4,5,6,7,8];return e.forEach(s=>{typeof s.index=="number"&&t.splice(t.indexOf(s.index),1)}),t}occurences(e,t){let s=0;return e.forEach(o=>{o.notes.forEach(n=>{n===t&&s++})}),s}identical(e,t){let s=[];return e.forEach(o=>{s.push(o)}),t.forEach(o=>{s.indexOf(o)>-1?s.splice(s.indexOf(o),1):s.push(null)}),s.length===0}threeTwoTwo(e){let t=e.concat(),s=[];t.forEach(u=>{u.notes.forEach(v=>{let m=s.findIndex(w=>{if(w.digit==v)return w});m>-1?(s[m].n++,s[m].rows.push(u.row),s[m].columns.push(u.column)):s.push({digit:v,rows:[u.row],columns:[u.column],n:1})})});let o=[],n=[];s.forEach(u=>{u.n==2?o.push(u):u.n==3&&n.push(u)});let r=[],a=[];o.length>0&&(a=a.concat(o)),n.length>0&&(a=a.concat(n)),s.forEach(u=>{r.push(u.digit)}),t=e.concat(),r=[],a.length==3&&a.forEach(u=>{r.push(u)});let c=[];if([].concat(o,n).forEach(u=>{u.rows.forEach((v,m)=>{c.find(g=>{if(g.row==u.rows[m]&&g.column==u.columns[m])return g})||c.push({row:u.rows[m],column:u.columns[m]})})}),c.length==3&&o.length==2&&n.length==1){let u=null,v=null,m=null;n.forEach((g,P)=>{let T=null;o.forEach(I=>{I.digit==g.digit&&(T=!0)}),T||(u=g.digit,v=g.columns[P],m=g.rows[P])});let w=[];return n.forEach(g=>{g.digit==u&&g.rows.forEach((P,T)=>{let I=e.find(b=>{if(b.row==g.rows[T]&&b.column==g.columns[T])return b});if(I){let b=I.notes.concat();g.rows[T]==m&&g.columns[T]==v?b.splice(b.indexOf(u),1):b=[u],w.push({notes:b,row:I.row,column:I.column,cell:I.cell})}})}),w}return[]}characteristics(e){let t=[0,1,2,3,4,5,6,7,8],s=[];return t.forEach(o=>{let n=[],r=[],a=[];e.forEach(c=>{c.notes.forEach(f=>{n.indexOf(c.row)==-1&&f==o&&n.push(c.row),r.indexOf(c.column)==-1&&f==o&&r.push(c.column),a.indexOf(c.cell)==-1&&f==o&&a.push(c.cell+1)})}),n.length==1&&s.push({index:o,row:n[0]}),r.length==1&&s.push({index:o,col:r[0]}),a.length==1&&s.push({index:o,cell:a[0]})}),s}notTaken(e){let t=[0,1,2,3,4,5,6,7,8];return e.forEach(s=>{typeof s.index=="number"&&t.splice(t.indexOf(s.index),1)}),t}removeFromCell(e,t,s,o,n){e.forEach(r=>{typeof t=="number"?typeof o=="number"?o>0?r.cell!=o-1&&r.row==t&&this.removeFromArray(r.notes,n):r.cell==-1*o-1&&r.row!=t&&this.removeFromArray(r.notes,n):r.row!=t&&this.removeFromArray(r.notes,n):typeof s=="number"&&(typeof o=="number"?o>0?r.cell!=o-1&&r.column==s&&this.removeFromArray(r.notes,n):r.cell==-1*o-1&&r.column!=s&&this.removeFromArray(r.notes,n):r.column!=s&&this.removeFromArray(r.notes,n))})}removeFromArray(e,t){t.forEach(s=>{e.indexOf(s)>-1&&e.splice(e.indexOf(s),1)})}unique(e,t){return this.occurences(e,t)===1}uniqueNotes(e){let t=!0;return e.forEach((s,o)=>{e.forEach((n,r)=>{r<o&&this.identical(s.notes,n.notes)&&(t=!1)})}),t}getDifficulty(){return this.isValid(this.notes)?this.difficulty:-1}getNotes(){return this.notes}}var te={sudoku:ee};const se={data(){return{cell:null,row:null,column:null,index:"",notes:[],isInitialValue:!1,selected:!1,className:""}},props:["set","mode","toggleModeMakeNotes"],mounted(){let i=this.$el,e=new F.Manager(i),t=new F.Press({time:500});e.add(t),e.on("press",s=>{this.mode>0&&this.index==""&&(this.selected=!0,this.toggleModeMakeNotes())}),document.querySelector("body").addEventListener("keyup",s=>{this.selected&&(isNaN(s.key)?this.$emit("keyboardInput",s.key.toUpperCase()):this.$emit("keyboardInput",parseInt(s.key)))})}},oe={key:0},ie={key:1},ne={key:2},re={key:3},le={key:4},ce={key:5},ue={key:6},ae={key:7},he={key:8},de={key:9},fe={key:10},me={key:11},ge={key:12},ve={key:13},xe={key:14},_e={key:15},pe={key:16},we={key:17};function ye(i,e,t,s,o,n){return typeof o.index=="number"?(h(),d("div",{key:0,class:O({index0:o.index==0,index1:o.index==1,index2:o.index==2,index3:o.index==3,index4:o.index==4,index5:o.index==5,index6:o.index==6,index7:o.index==7,index8:o.index==8,number:!0,selected:o.selected,initialValue:o.isInitialValue,"full-cell":o.className=="fullcell","full-row":o.className=="fullrow","full-column":o.className=="fullcolumn"})},[l("div",null,p(t.set[o.index]),1)],2)):(h(),d("div",{key:1,class:O({number:!0,notes:!0,selected:o.selected})},[o.notes.indexOf(0)>-1?(h(),d("span",oe,p(t.set[0]),1)):(h(),d("span",ie,"\xA0")),o.notes.indexOf(1)>-1?(h(),d("span",ne,p(t.set[1]),1)):(h(),d("span",re,"\xA0")),o.notes.indexOf(2)>-1?(h(),d("span",le,p(t.set[2]),1)):(h(),d("span",ce,"\xA0")),o.notes.indexOf(3)>-1?(h(),d("span",ue,p(t.set[3]),1)):(h(),d("span",ae,"\xA0")),o.notes.indexOf(4)>-1?(h(),d("span",he,p(t.set[4]),1)):(h(),d("span",de,"\xA0")),o.notes.indexOf(5)>-1?(h(),d("span",fe,p(t.set[5]),1)):(h(),d("span",me,"\xA0")),o.notes.indexOf(6)>-1?(h(),d("span",ge,p(t.set[6]),1)):(h(),d("span",ve,"\xA0")),o.notes.indexOf(7)>-1?(h(),d("span",xe,p(t.set[7]),1)):(h(),d("span",_e,"\xA0")),o.notes.indexOf(8)>-1?(h(),d("span",pe,p(t.set[8]),1)):(h(),d("span",we,"\xA0"))],2))}var ke=y(se,[["render",ye]]);const Se={data(){return{editSet:!1}},props:["value","move","set","mode","index","changeSet"],methods:{doMove(){this.$props.move(this.set[this.index])},allowedInSet(i){return i.match(/[a-zA-Z1-9]/)&&this.set.indexOf(i)==-1&&(isNaN(i)||this.set.indexOf(parseInt(i))==-1)},change(i){this.allowedInSet(i.srcElement.value)&&this.changeSet(this.index,i.srcElement.value.toUpperCase()),this.editSet=!1}},mounted(){let i=this.$el,e=new F.Manager(i),t=new F.Press({time:500});e.add(t),e.on("press",s=>{this.mode==0&&(this.editSet=!this.editSet,q(()=>{this.$el.querySelector("input").focus()}))})}};function be(i,e,t,s,o,n){return h(),d("div",null,[o.editSet?(h(),d("input",{key:1,type:"text",onKeyup:e[1]||(e[1]=(...r)=>n.change&&n.change(...r)),onKeydown:e[2]||(e[2]=B(r=>o.editSet=!1,["esc"])),onBlur:e[3]||(e[3]=r=>o.editSet=!1)},null,32)):(h(),d("button",{key:0,onClick:e[0]||(e[0]=_(r=>n.doMove(),["stop"]))},p(t.set[t.index]),1))])}var Te=y(Se,[["render",be]]);const Ie={components:{Button:Te},data(){return{}},props:["set","changeSet","move","mode"]};function Ee(i,e,t,s,o,n){const r=S("Button");return h(),d("div",null,[x(r,{index:"0",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"1",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"2",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"3",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"4",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"5",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"6",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"7",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),x(r,{index:"8",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"])])}var Ce=y(Ie,[["render",Ee]]),D="/Sudoku-MIT/img/exit.svg",R="/Sudoku-MIT/img/star.svg",Ne="/Sudoku-MIT/img/looking-glass.svg",A="/Sudoku-MIT/img/new.svg",Me="/Sudoku-MIT/img/magic-wand.svg";const Oe={props:["setDifficulty","generate","magicWand"],emits:["startTour","endTour","setDifficulty"],data(){return{showDialog:!1,difficulty:1,exitIconUrl:D,starIconUrl:R,tourIconUrl:Ne,newIconUrl:A,magicWandUrl:Me}},watch:{difficulty(i,e){let t=this.$el.querySelector(".rating");switch(e){case 1:t.classList.remove("one");break;case 2:t.classList.remove("two");break;case 3:t.classList.remove("three");break;case 4:t.classList.remove("four");break}switch(i){case 1:t.classList.add("one");break;case 2:t.classList.add("two");break;case 3:t.classList.add("three");break;case 4:t.classList.add("four");break}}},methods:{startTour(){this.$emit("startTour")},changeDifficulty(i){this.difficulty=i,this.$emit("setDifficulty",i)},generateSudoku(){setTimeout(()=>{this.generate()},1),this.hide()},startWithAutoNotes(){this.magicWand(),this.hide()},show(){this.showDialog=!0},hide(){this.showDialog=!1,this.$emit("endTour")}}},Fe={key:0,class:"dialog"},Ue={method:"dialog"},De=l("legend",null,null,-1),Pe=["src"],qe=l("div",{class:"logo"},"Sudoku / MIT",-1),Re={class:"view"},Ae={"tour-id":"13",class:"one rating"},Le=["src"],ze=["src"],Be=["src"],Ve=["src"],We=l("div",{class:"type"},null,-1),$e={class:"menu"},je=["src"],He=["src"],Ke=["src"];function Ge(i,e,t,s,o,n){return o.showDialog?(h(),d("div",Fe,[l("form",Ue,[l("fieldset",null,[De,l("div",null,[E(l("img",{class:"exit",src:o.exitIconUrl,onClick:e[0]||(e[0]=_(r=>n.hide(),["stop"]))},null,8,Pe),[[C,!1]]),qe,l("div",Re,[l("div",Ae,[l("img",{class:"star",src:o.starIconUrl,onClick:e[1]||(e[1]=r=>n.changeDifficulty(1))},null,8,Le),l("img",{class:"star",src:o.starIconUrl,onClick:e[2]||(e[2]=r=>n.changeDifficulty(2))},null,8,ze),l("img",{class:"star",src:o.starIconUrl,onClick:e[3]||(e[3]=r=>n.changeDifficulty(3))},null,8,Be),l("img",{class:"star",src:o.starIconUrl,onClick:e[4]||(e[4]=r=>n.changeDifficulty(4))},null,8,Ve)]),We,l("div",$e,[l("img",{"tour-id":"12",src:o.tourIconUrl,onClick:e[5]||(e[5]=_(r=>n.startTour(),["stop"]))},null,8,je),l("img",{"tour-id":"14",src:o.newIconUrl,onClickOnce:e[6]||(e[6]=r=>n.generateSudoku())},null,40,He),l("img",{"tour-id":"15",src:o.magicWandUrl,onClick:e[7]||(e[7]=_(r=>n.startWithAutoNotes(),["stop"]))},null,8,Ke)])])])])])])):U("",!0)}var Je=y(Oe,[["render",Ge]]);const Xe={props:["magic-wand"],data(){return{showDialog:!1,exitIconUrl:D}},methods:{show(){this.showDialog=!0},hide(){this.showDialog=!1}}},Ye={key:0,class:"dialog"},Ze={method:"dialog"},Qe=l("legend",null,null,-1),et=["src"],tt=l("h1",null,"Solved!",-1);function st(i,e,t,s,o,n){return o.showDialog?(h(),d("div",Ye,[l("form",Ze,[l("fieldset",null,[Qe,l("div",null,[l("img",{"data-ref":"cancel",class:"exit",src:o.exitIconUrl,onClick:e[0]||(e[0]=_(r=>n.hide(),["stop"]))},null,8,et),tt])])])])):U("",!0)}var ot=y(Xe,[["render",st]]);const it={components:{Tile:ke,Numbers:Ce,StartDialog:Je,FinishedDialog:ot},emits:["startTour","endTour","difficulty","solved","restore","startPlay"],data(){return{selectedTile:null,canMakeNotes:!1,index:0,startPlayIndex:0,set:[1,2,3,4,5,6,7,8,9],game:[{board:[],notes:[],columnsFull:[],rowsFull:[],cellsFull:[]}],autoNotes:!1,sudoku:te,difficulty:1}},props:["theme","mode","toggleModeMakeNotes","settings","changeScreen"],watch:{index(i){this.syncBoard(this.game,i),this.selectedTile&&this.afterMove(this.selectedTile)}},mounted(){this.$refs.tile.forEach((i,e)=>{i.cell=this.indexToCell(e),i.row=this.indexToRow(e),i.column=this.indexToCol(e)}),this.$refs.start.show()},methods:{onStartTour(){this.$emit("startTour")},onEndTour(){this.$emit("endTour")},syncBoard(i,e){if(this.setValues(i[e].board),this.autoNotes){let t=new this.sudoku.sudoku(this.getTiles());this.$emit("difficulty",t.getDifficulty()),i[e].notes=t.getNotes()}this.setNotes(i[e].notes)},onSetDifficulty(i){this.difficulty=i},generateSudoku(){var i=new Worker("/Sudoku-MIT/assets/generate.8b0a84dd.js",{type:"module"});i.onmessage=e=>{this.game[this.index].board=e.data.tiles,this.syncBoard(this.game,this.index),this.$emit("difficulty",e.data.d),this.$emit("startPlay",!0)},i.postMessage({tiles:this.getTiles(),d:this.difficulty}),this.changeScreen("pauze")},startWithAutoNotes(){this.autoNotes=!0},indexToCell(i){return Math.floor(i/9)},indexToRow(i){return Math.floor(i/3)%3+Math.floor(Math.floor(i/9)/3)*3+1},indexToCol(i){return i%3+Math.floor(i/9)%3*3+1},cellRowColToIndex(i,e,t){return i*9+(3*e+t)},rowColToIndex(i,e){return(i-1)%3*3+Math.floor((i-1)/3)*27+Math.floor((e-1)/3)*9+(e-1)%3},cellRowColumnToRowColumn(i,e,t){let s=e+1+Math.floor(i/3)*3,o=t+1+i%3*3;return{row:s,column:o}},cell(i){let e=[];for(let t=0;t<3;t++)for(let s=0;s<3;s++)e.push(this.$refs.tile[this.cellRowColToIndex(i,t,s)]);return e},row(i){let e=[];for(let t=1;t<10;t++)e.push(this.$refs.tile[this.rowColToIndex(i,t)]);return e},column(i){let e=[];for(let t=1;t<10;t++)e.push(this.$refs.tile[this.rowColToIndex(t,i)]);return e},getTiles(){let i=[];return this.$refs.tile.forEach(e=>{i.push({cell:e.cell,row:e.row,column:e.column,index:e.index})}),i},taken(i){let e=[];return i.forEach(t=>{typeof t.index=="number"&&e.push(t.index)}),e.length},isFull(i){return this.taken(i)==9},beforeMove(i,e){let t=[],s=!0;return t=t.concat(this.cell(i.cell),this.row(i.row),this.column(i.column)),t.forEach(o=>{typeof o.index=="number"&&o.index==e&&(s=!1),o.row==i.row&&o.column==i.column&&o.initialValue&&this.mode!=0&&(s=!1)}),s},playSound(i){var e=new V.Howl({src:["snds/"+i]});this.settings.audio&&e.play()},afterMove(i){let e=this.cell(i.cell),t=!1;this.isFull(e)&&this.game[this.index].cellsFull.indexOf(i.cell)==-1&&(this.animateFullCell(i.cell),this.game[this.index].cellsFull.push(i.cell),t=!0),e=this.row(i.row),this.isFull(e)&&this.game[this.index].rowsFull.indexOf(i.row)==-1&&(this.animateFullRow(i.row),this.game[this.index].rowsFull.push(i.row),t=!0),e=this.column(i.column),this.isFull(e)&&this.game[this.index].columnsFull.indexOf(i.column)==-1&&(this.animateFullColumn(i.column),this.game[this.index].columnsFull.push(i.column),t=!0),t&&(this.game[this.index].cellsFull.length==9?(this.$emit("solved",!0),this.playSound("triangle-3x.mp3"),this.$refs.finished.show()):this.playSound("triangle.mp3"))},animateFullCell(i){this.cell(i).forEach(t=>{t.className="fullcell"})},animateFullRow(i){this.row(i).forEach(t=>{t.className="fullrow"})},animateFullColumn(i){this.column(i).forEach(t=>{t.className="fullcolumn"})},removeFromNotes(i,e,t){t.forEach(s=>{s.row!=i.row&&s.column!=i.column&&s.notes.length>0,s.notes.splice(s.notes.indexOf(e),1)})},updateNotes(i,e){this.removeFromNotes(i,e,this.cell(i.cell)),this.removeFromNotes(i,e,this.row(i.row)),this.removeFromNotes(i,e,this.column(i.column))},moveRowCol(i,e,t,s){this.$refs.tile[this.rowColToIndex(i,e)].index=t,this.$refs.tile[this.rowColToIndex(i,e)].isInitialValue=s,this.$refs.tile[this.rowColToIndex(i,e)].className=""},addNotesRowCol(i,e,t){this.$refs.tile[this.rowColToIndex(i,e)].notes=t},setSelectedTile(i,e,t){this.selectedTile={cell:i,row:e,column:t}},unsetSelectedTile(){this.unselectAll(),this.selectedTile=null},keyboardInput(i){this.set.indexOf(i)>-1&&this.move(i)},move(i){if(this.selectedTile){if(!this.beforeMove(this.selectedTile,this.set.indexOf(i)))return;this.game.length>this.index+1&&this.game.splice(this.index+1);let e=this.game.concat(),t=e[this.index].board.concat(),s=e[this.index].notes.concat(),o=e[this.index].cellsFull.concat(),n=e[this.index].rowsFull.concat(),r=e[this.index].columnsFull.concat();e.push({board:t,notes:s,cellsFull:o,rowsFull:n,columnsFull:r});let a=this.index+1;if(this.mode==2){let c=[];s.forEach(f=>{f.row==this.selectedTile.row&&f.column==this.selectedTile.column&&(c=f.notes.concat())}),c.indexOf(this.set.indexOf(i))==-1?c.push(this.set.indexOf(i)):c.splice(c.indexOf(this.set.indexOf(i)),1),c.sort(),e[a].notes.push({row:this.selectedTile.row,column:this.selectedTile.column,cell:this.selectedTile.cell,notes:c})}else e[a].board.push({row:this.selectedTile.row,column:this.selectedTile.column,cell:this.selectedTile.cell,index:this.set.indexOf(i),initialValue:this.mode==0}),this.updateNotes(this.selectedTile,this.set.indexOf(i)),this.unselectAll();this.game=e,this.index=this.game.length-1}},select(i,e,t){let s=this.cellRowColumnToRowColumn(i,e,t);this.setSelectedTile(i,s.row,s.column),this.unselectAll(),this.$refs.tile[this.cellRowColToIndex(i,e,t)].selected=!0,this.$refs.tile[this.cellRowColToIndex(i,e,t)].index==""?this.canMakeNotes=!0:this.canMakeNotes=!1},unselectAll(){this.$refs.tile.forEach(i=>{i.selected=!1})},clearBoard(){for(let i=1;i<10;i++)for(let e=1;e<10;e++)this.moveRowCol(i,e,"")},clearNotes(){for(let i=1;i<10;i++)for(let e=1;e<10;e++)this.addNotesRowCol(i,e,[])},setValues(i){this.clearBoard(),i.forEach(e=>{this.moveRowCol(e.row,e.column,e.index,e.initialValue)})},setNotes(i){this.clearNotes(),i.forEach(e=>{this.addNotesRowCol(e.row,e.column,e.notes)})},changeSet(i,e){i>-1&&i<this.set.length&&(this.set[i]=e)},back(){this.index>0&&this.index--},forward(){this.index<this.game.length-1&&this.index++},play(){this.startPlayIndex=this.index},refresh(){this.index=this.startPlayIndex},backup(i){let e={index:this.index,startPlayIndex:this.startPlayIndex,set:this.set,game:this.game,time:i};localStorage.setItem("backup",JSON.stringify(e))},restore(){let i={},e=localStorage.getItem("backup");e&&(i=JSON.parse(e),this.game=i.game,this.set=i.set,this.startPlayIndex=i.startPlayIndex,this.index==i.index?this.syncBoard(this.game,this.index):this.index=i.index,this.$emit("restore",i.time))}}},nt={class:"board"},rt={class:"row"},lt={class:"cell"},ct={class:"cellrow"},ut=["onClick"],at={"tour-id":"8",class:"buttons"};function ht(i,e,t,s,o,n){const r=S("StartDialog"),a=S("FinishedDialog"),c=S("Tile"),f=S("Numbers");return h(),d(k,null,[x(r,{ref:"start",onSetDifficulty:n.onSetDifficulty,generate:n.generateSudoku,"magic-wand":n.startWithAutoNotes,onStartTour:n.onStartTour,onEndTour:n.onEndTour},null,8,["onSetDifficulty","generate","magic-wand","onStartTour","onEndTour"]),x(a,{ref:"finished"},null,512),l("div",{onClick:e[0]||(e[0]=u=>(n.unsetSelectedTile(),n.onEndTour())),"tour-id":"board"},[l("div",nt,[(h(),d(k,null,N([0,1,2],u=>l("div",rt,[(h(),d(k,null,N([0,1,2],v=>l("div",lt,[(h(),d(k,null,N([0,1,2],m=>l("div",ct,[(h(),d(k,null,N([0,1,2],w=>l("div",{class:O({"make-notes":t.mode==2&&o.canMakeNotes}),onClick:_(g=>n.select(3*u+v,m,w),["stop"])},[x(c,{ref_for:!0,ref:"tile",set:o.set,mode:t.mode,onKeyboardInput:n.keyboardInput,toggleModeMakeNotes:t.toggleModeMakeNotes},null,8,["set","mode","onKeyboardInput","toggleModeMakeNotes"])],10,ut)),64))])),64))])),64))])),64))]),l("div",at,[x(f,{set:o.set,move:n.move,mode:t.mode,changeSet:n.changeSet},null,8,["set","move","mode","changeSet"])])])],64)}var dt=y(it,[["render",ht]]),ft="/Sudoku-MIT/img/audio.svg",mt="/Sudoku-MIT/img/audio-off.svg",gt="/Sudoku-MIT/img/theme-black.svg",vt="/Sudoku-MIT/img/theme-blue.svg";const xt={props:["changeScreen","changeTheme","toggleAudio","settings"],data(){return{exitIconUrl:D,audioIconUrl:ft,audioOffIconUrl:mt,themeBlackIconUrl:gt,themeBlueIconUrl:vt}}},_t=["src"],pt={class:"options"},wt=["src"],yt=["src"],kt={class:"options"},St=["src"],bt=["src"];function Tt(i,e,t,s,o,n){return h(),d(k,null,[l("div",{class:"exit",onClick:e[0]||(e[0]=_(r=>t.changeScreen("game"),["stop"]))},[l("img",{src:o.exitIconUrl},null,8,_t)]),l("div",null,[l("div",pt,[E(l("img",{src:o.audioIconUrl,onClick:e[1]||(e[1]=_(r=>t.toggleAudio(),["stop"]))},null,8,wt),[[C,t.settings.audio]]),E(l("img",{src:o.audioOffIconUrl,onClick:e[2]||(e[2]=_(r=>t.toggleAudio(),["stop"]))},null,8,yt),[[C,t.settings.audio==!1]])]),l("div",kt,[E(l("img",{src:o.themeBlackIconUrl,onClick:e[3]||(e[3]=r=>t.changeTheme("black"))},null,8,St),[[C,t.settings.theme=="default"]]),E(l("img",{src:o.themeBlueIconUrl,onClick:e[4]||(e[4]=r=>t.changeTheme("default"))},null,8,bt),[[C,t.settings.theme=="black"]])])])],64)}var L=y(xt,[["render",Tt],["__scopeId","data-v-596d15cb"]]),It="/Sudoku-MIT/img/back.svg",Et="/Sudoku-MIT/img/forward.svg",Ct="/Sudoku-MIT/img/refresh.svg",Nt="/Sudoku-MIT/img/play.svg",Mt="/Sudoku-MIT/img/pauze.svg",Ot="/Sudoku-MIT/img/hamburger.svg",Ft="/Sudoku-MIT/img/pencil.svg",Ut="/Sudoku-MIT/img/backup.svg",Dt="/Sudoku-MIT/img/restore.svg";const Pt={components:{Tour:Q,Board:dt,Settings:L},data(){return{mode:0,pauzed:!1,d:null,t:0,time:"00:00:00",t1:null,backIconUrl:It,forwardIconUrl:Et,newIconUrl:A,refreshIconUrl:Ct,playIconUrl:Nt,pauzeIconUrl:Mt,hamurgerIconUrl:Ot,starIconUrl:R,pencilIconUrl:Ft,backupIconUrl:Ut,restoreIconUrl:Dt}},watch:{mode(i,e){i==1&&e==0&&(clearInterval(this.t1),this.t1=setInterval(this.updateTime,1e3))},pauzed(i){i?clearInterval(this.t1):this.t1=setInterval(this.updateTime,1e3)}},methods:{onStartTour(){this.$refs.tour.initTour(11)},onEndTour(){this.$refs.tour.hide()},onSolved(i){i&&clearInterval(this.t1)},onRestore(i){this.t=i},onDifficulty(i){this.d=i},toggleModeMakeNotes(){this.mode==1&&this.$refs.board.canMakeNotes?this.mode=2:this.mode==2&&(this.mode=1)},updateTime(){this.t++,this.time=this.formatSeconds(this.t)},formatSeconds(i){var e=Math.floor(i/3600),t=Math.floor((i-e*3600)/60),s=i-e*3600-t*60;return e<10&&(e="0"+e),t<10&&(t="0"+t),s<10&&(s="0"+s),e+":"+t+":"+s},start(){document.location.reload()},play(){this.changeScreen("game"),this.mode==0?(this.mode=1,this.$refs.board.play(),this.pauzed=!1):this.mode==1&&(this.pauzed=!1)},pauze(){this.pauzed=!0,this.changeScreen("pauze")},back(){this.$refs.board.back()},forward(){this.$refs.board.forward()},refresh(){this.$refs.board.refresh()},backup(){this.$refs.board.backup(this.t),this.changeScreen("pauze")},restore(){this.$refs.board.restore(),this.mode=1}},props:["changeScreen","settings"]},qt={class:"top-menu"},Rt=["src"],At=["src"],Lt=["src"],zt=["src"],Bt=["src"],Vt=["src"],Wt={class:"score"},$t=["src"],jt={class:"bottom-menu"},Ht=["src"],Kt=["src"],Gt=["src"];function Jt(i,e,t,s,o,n){const r=S("Tour"),a=S("Board");return h(),d(k,null,[x(r,{ref:"tour"},null,512),l("div",null,[l("div",qt,[l("div",null,[l("img",{"tour-id":"1",src:o.backIconUrl,onClick:e[0]||(e[0]=_(c=>n.back(),["stop"]))},null,8,Rt)]),l("div",null,[l("img",{"tour-id":"2",src:o.forwardIconUrl,onClick:e[1]||(e[1]=c=>n.forward())},null,8,At)]),l("div",null,[l("img",{"tour-id":"3",src:o.newIconUrl,onClick:e[2]||(e[2]=c=>n.start())},null,8,Lt)]),l("div",null,[l("img",{"tour-id":"4",src:o.refreshIconUrl,onClick:e[3]||(e[3]=c=>n.refresh())},null,8,zt)]),U("",!0),l("div",null,[l("img",{"tour-id":"6",src:o.pauzeIconUrl,class:O({grayed:o.mode==0}),onClick:e[5]||(e[5]=_((...c)=>n.pauze&&n.pauze(...c),["stop"]))},null,10,Bt)]),l("div",null,[l("img",{"tour-id":"7",src:o.hamurgerIconUrl,onClick:e[6]||(e[6]=_(c=>t.changeScreen("settings"),["stop"]))},null,8,Vt)])]),l("div",Wt,[l("div",null,[o.d>-1?(h(!0),d(k,{key:0},N(o.d,c=>(h(),d("img",{src:o.starIconUrl},null,8,$t))),256)):U("",!0)]),l("div",null,p(o.time),1)]),x(a,{ref:"board",mode:o.mode,settings:t.settings,toggleModeMakeNotes:n.toggleModeMakeNotes,changeScreen:t.changeScreen,onStartTour:n.onStartTour,onEndTour:n.onEndTour,onDifficulty:n.onDifficulty,onSolved:n.onSolved,onRestore:n.onRestore,onStartPlay:n.play},null,8,["mode","settings","toggleModeMakeNotes","changeScreen","onStartTour","onEndTour","onDifficulty","onSolved","onRestore","onStartPlay"]),l("div",jt,[l("img",{"tour-id":"9",src:o.pencilIconUrl,class:O({grayed:o.mode==0}),onClick:e[7]||(e[7]=_(c=>n.toggleModeMakeNotes(),["stop"]))},null,10,Ht),l("img",{"tour-id":"10",src:o.backupIconUrl,onClick:e[8]||(e[8]=c=>n.backup())},null,8,Kt),l("img",{"tour-id":"11",src:o.restoreIconUrl,onClick:e[9]||(e[9]=c=>n.restore())},null,8,Gt)])])],64)}var Xt=y(Pt,[["render",Jt]]);const Yt={props:["changeScreen"],data(){return{t1:null,m:0,square:[[6,7,2,1,5,9,8,3,4],[2,9,4,7,5,3,6,1,8],[4,3,8,9,5,1,2,7,6],[8,1,6,2,5,7,4,9,2]],exitIconUrl:D}},mounted(){this.t1=setInterval(()=>{this.m++,this.m%=4},1e3)},unmounted(){clearInterval(this.t1)}},Zt=["src"],Qt={class:"square"},es={class:"tile"};function ts(i,e,t,s,o,n){return h(),d(k,null,[l("div",{class:"exit",onClick:e[0]||(e[0]=_(r=>t.changeScreen("game"),["stop"]))},[l("img",{src:o.exitIconUrl},null,8,Zt)]),l("div",Qt,[(h(),d(k,null,N(9,r=>l("div",es,p(o.square[o.m][r-1]),1)),64))])],64)}var ss=y(Yt,[["render",ts],["__scopeId","data-v-4510118f"]]);const os={components:{Game:Xt,Settings:L,Pauze:ss},data(){return{themes:["default","black"],screen:"game",settings:{audio:!0,theme:"default"}}},beforeMount(){this.readSettings(),this.applyTheme(this.settings.theme)},methods:{changeScreen(i){this.screen=i,q(()=>{this.$refs.game&&i=="game"&&(this.$refs.game.pauzed=!1)})},applyTheme(i){this.themes.forEach(e=>{document.querySelector("body").classList.remove(e)}),document.querySelector("body").classList.add(i)},changeTheme(i){this.settings.theme=i,this.saveSettings(),this.applyTheme(i)},toggleAudio(){this.settings.audio=!this.settings.audio,this.saveSettings()},saveSettings(){localStorage.setItem("settings",JSON.stringify(this.settings))},readSettings(){let i=localStorage.getItem("settings");i&&(this.settings=JSON.parse(i))}}};function is(i,e,t,s,o,n){const r=S("Settings"),a=S("Pauze"),c=S("Game");return h(),M(W,null,[o.screen=="settings"?(h(),M(r,{key:0,changeScreen:n.changeScreen,changeTheme:n.changeTheme,settings:o.settings,toggleAudio:n.toggleAudio},null,8,["changeScreen","changeTheme","settings","toggleAudio"])):o.screen=="pauze"?(h(),M(a,{key:1,changeScreen:n.changeScreen},null,8,["changeScreen"])):(h(),M(c,{key:2,ref:"game",changeScreen:n.changeScreen,settings:o.settings},null,8,["changeScreen","settings"]))],1024)}var ns=y(os,[["render",is]]);const rs={setup(i){return(e,t)=>(h(),M(ns))}};$(rs).mount("#app");
