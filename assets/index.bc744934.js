import{n as F,w as k,v as S,o as h,c as d,a as R,H as E,b as r,t as v,d as C,e as g,f as P,r as y,g as m,h as N,i as A,F as _,j as b,k as I,K as L,l as z}from"./vendor.94885de0.js";const B=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};B();class V{constructor(e={}){this.popupWidth=0,this.popupHeight=0,this.config=e,this.last=null,this.el=null,this.index=0,window.addEventListener("beforeunload",()=>{localStorage.setItem("tour","1")}),window.addEventListener("resize",()=>{this.last&&this.last()}),document.querySelector("body").addEventListener("keyup",t=>{t.key=="ArrowRight"?this.next():t.key=="ArrowLeft"&&this.prev()})}setParams(e,t){this.popupWidth=e,this.popupHeight=t}getParam(e,t){if(this.config[e])return this.config[e][t]}next(){let e=this.index;e++,e%=Object.keys(this.config).length,this.config[e]&&this.explain(this.el,e)}prev(){let e=this.index;e--,e<0&&(e=Object.keys(this.config).length-1),this.config[e]&&this.explain(this.el,e)}getTourId(e){return this.config.find((s,o)=>{if(o==e)return s})["tour-id"]}getPosition(e){if(this.config[e]){let t=this.getTourId(e),s=document.querySelector("[tour-id='"+t+"']");if(s)return s.getBoundingClientRect()}}getOrientation(e){let t=!1,s=!1,o=!1,n=!1,l=window.screen;return l.width<e.x+this.popupWidth/2?s=!0:e.x+e.width<this.popupWidth/2&&(t=!0),l.height/2>e.y?n=!0:o=!0,{left:t,right:s,bottom:o,top:n}}explain(e,t){this.last=()=>{let s=this.getParam(t,"left"),o=this.getParam(t,"top"),n=this.getPosition(t),l=this.getParam(t,"hide"),u=this.getParam(t,"show");if(this.el=e,this.index=t,n&&e){let c=document.querySelector(u);c&&c.setAttribute("style","");let a=document.querySelector(l);a&&a.setAttribute("style","visibility:hidden;");let f=e.querySelector(".txt");f&&(f.innerHTML=this.getParam(t,"txt")+'<br/><br/><span id="nextTour">I got it.</span>');let p=e.getBoundingClientRect();document.querySelector("#nextTour").addEventListener("click",()=>{this.next()});let w=this.getOrientation(n);w.top?(e.querySelector(".top").classList.remove("hide"),e.querySelector(".bottom").classList.add("hide")):w.bottom&&(e.querySelector(".bottom").classList.remove("hide"),e.querySelector(".top").classList.add("hide")),e.querySelector(".top").classList.remove("left"),e.querySelector(".top").classList.remove("right"),e.querySelector(".bottom").classList.remove("left"),e.querySelector(".bottom").classList.remove("right"),w.right?(e.querySelector(".top").classList.add("right"),e.querySelector(".bottom").classList.add("right")):w.left&&(e.querySelector(".top").classList.add("left"),e.querySelector(".bottom").classList.add("right"));let T="left:"+(n.left+n.width/2+s-this.popupWidth/2)+"px;",O="top:"+(n.bottom+o)+"px;";w.right?T="right:0px;":w.left&&(T="left:0px;"),w.bottom&&(O="top:"+(n.top-p.height-o)+"px;"),e.setAttribute("style",O+T)}},this.last()}}var W={tour:V};var x=(i,e)=>{const t=i.__vccOpts||i;for(const[s,o]of e)t[s]=o;return t};const $={data(){return{showTour:!1,tour:new W.tour([{"tour-id":1,txt:"Undo last move",left:0,top:20,hide:".dialog"},{"tour-id":2,txt:"Redo last undone move",left:0,top:20},{"tour-id":3,txt:"Start a new game",left:0,top:20},{"tour-id":4,txt:"Refresh to the beginning and undo all moves",left:0,top:20},{"tour-id":6,txt:"Pauze",left:0,top:20},{"tour-id":7,txt:"Settings",left:0,top:20},{"tour-id":"board",txt:"This is the board. Select a square and use the buttons or keyboard to enter a value.",left:-2,top:-240},{"tour-id":8,txt:"These are the possibilities to select from. Press-and-hold to enter letters.",left:0,top:0},{"tour-id":9,txt:"Make notes while you play after clicking here or press-and-hold a square. They will be automatically updated when you make a move.",left:0,top:0},{"tour-id":10,txt:"If you are not sure about a move, make a backup to restore later.",left:0,top:0},{"tour-id":11,txt:"Restore the last backup.",left:0,top:0,hide:".dialog"},{"tour-id":12,txt:"Take a tour around the interface.",left:0,top:10,show:".dialog"},{"tour-id":13,txt:"The difficulty of the Sudoku.",left:0,top:-20,show:".dialog"},{"tour-id":14,txt:"Play Sudoku!",left:0,top:10,show:".dialog"},{"tour-id":15,txt:"Create a Sudoku and see if the computer can crack it.",left:0,top:10,show:".dialog"}])}},methods:{show(){this.showTour=!0},hide(){this.showTour=!1;let i=document.querySelector(".dialog");i&&i.setAttribute("style","")},hadTour(){return!!localStorage.getItem("tour")},setTourParms(i,e){this.tour.setParams(i,e)},initTour(i){this.showTour?this.hide():(this.setTourParms(200,0),this.tour.explain(this.$el,i),this.show())}},mounted(){F(()=>{setTimeout(()=>{this.hadTour()||this.initTour(11)},500)})}},j={class:"popup"},H=R('<div class="top"><div class="arrow arrow-up"></div></div><div class="txt"></div><br><div class="bottom right"><div class="arrow arrow-down"></div></div>',4),K=[H];function G(i,e,t,s,o,n){return k((h(),d("div",j,K,512)),[[S,o.showTour]])}var J=x($,[["render",G]]);class X{constructor(e,t=!0){this.tiles=e,this.difficulty=0,this.notes=[],t&&(this.notes=this.makeNotes())}getTile(e,t){let s=null;return this.tiles.forEach(o=>{if(o.row==e&&o.column==t){s=o;return}}),s}getCell(e){let t=[];return this.tiles.forEach(s=>{s.cell==e&&t.push(s)}),t}getRow(e){let t=[];for(let s=1;s<10;s++)t.push(this.getTile(e,s));return t}getColumn(e){let t=[];for(let s=1;s<10;s++)t.push(this.getTile(s,e));return t}makeNotes(){let e=[],t=729,s=81*9-1,o=1,n=[0,0];for(e=this.interpretNotes1(this.gatherNotes(e));o>0;)e=this.interpretNotes1(e),s=this.countPossibilities(e),o=t-s,n[0]+=o,o==0&&(e=this.interpretNotes2(e),o=s-this.countPossibilities(e),n[1]+=o),t=s;return t==0?this.difficulty=this.calcDifficulty(n[0],n[1]):this.difficulty=-1,e}calcDifficulty(e,t){return Math.round((e+40*t)/(e+t))}countPossibilities(e){let t=0;return e.forEach(s=>{s.notes.length>1&&(t+=s.notes.length-1)}),t}gatherNotes(e){let t=[];for(let s=0;s<9;s++)t.push(this.getCell(s));return t.forEach(s=>{s.forEach(o=>{typeof o.index!="number"&&e.push({cell:o.cell,row:o.row,column:o.column,notes:this.missing(s)})})}),e}interpretNotes1(e){let t=[];for(let u=1;u<10;u++)t.push(this.getRow(u));t.forEach((u,c)=>{let a=[];u.forEach(f=>{typeof f.index=="number"&&a.push(f.index)}),e.forEach(f=>{a.forEach(p=>{f.row==c+1&&f.notes.indexOf(p)>-1&&f.notes.splice(f.notes.indexOf(p),1)})})});let s=[];for(let u=1;u<10;u++)s.push(this.getColumn(u));s.forEach((u,c)=>{let a=[];u.forEach(f=>{typeof f.index=="number"&&a.push(f.index)}),e.forEach(f=>{a.forEach(p=>{f.column==c+1&&f.notes.indexOf(p)>-1&&f.notes.splice(f.notes.indexOf(p),1)})})});let o=[1,2,3,4,5,6,7,8,9],n=[];return o.forEach(u=>{let c=this.notesCol(e,u);c.forEach(a=>{a.notes.forEach(f=>{this.unique(c,f)&&n.push({cell:a.cell,row:a.row,column:a.column,index:f})})})}),o.forEach(u=>{let c=this.notesRow(e,u);c.forEach(a=>{a.notes.forEach(f=>{this.unique(c,f)&&n.push({cell:a.cell,row:a.row,column:a.column,index:f})})})}),n.forEach(u=>{this.unsetOthers(e,u)}),this.found(e).forEach(u=>{let c=this.notesRow(e,u.row);c.forEach(a=>{u.column!=a.column&&this.removeFromArray(a.notes,u.notes)}),c=this.notesCol(e,u.column),c.forEach(a=>{u.row!=a.row&&this.removeFromArray(a.notes,u.notes)})}),e}interpretNotes2(e){for(let t=1;t<10;t++){let s=this.notesRow(e,t),o=this.notTaken(this.getRow(t));s.length>0&&o.length>0&&s.length<4&&o.length<4&&this.removeFromCell(this.notesCell(e,s[0].cell),t,null,o);let n=this.notesCol(e,t),l=this.notTaken(this.getColumn(t));n.length>0&&l.length>0&&n.length<4&&l.length<4&&this.removeFromCell(this.notesCell(e,n[0].cell),null,t,l)}for(let t=1;t<10;t++){let s=[];this.notesCell(e,t).forEach(n=>{n.notes.length==2&&s.push(n)}),s=this.findIndentical(s),s.length==2&&(s[0].row==s[1].row?this.notesRow(e,s[0].row).forEach(l=>{s[0].column!=l.column&&s[1].column!=l.column&&this.removeFromArray(l.notes,s[0].notes)}):s[0].column==s[1].column&&this.notesCol(e,s[0].column).forEach(l=>{s[0].row!=l.row&&s[1].row!=l.row&&this.removeFromArray(l.notes,s[0].notes)}))}for(let t=1;t<10;t++){let s=this.notesCell(e,t);for(let o=0;o<9;o++){let n=this.findDigitInNotes(s,o),l=this.allOnRow(n);l>-1&&n.length>1&&this.notesRow(e,l).forEach(a=>{a.cell!=n[0].cell&&this.removeFromArray(a.notes,[o])});let u=this.allOnColumn(n);u>-1&&n.length>1&&this.notesCol(e,u).forEach(a=>{a.cell!=n[0].cell&&this.removeFromArray(a.notes,[o])})}}for(let t=1;t<10;t++)for(let s=0;s<9;s++){let o=this.notesCell(e,t),n=this.findDigitInNotes(o,s);n.length==1&&(n[0].notes=[s])}for(let t=1;t<10;t++)for(let s=0;s<9;s++){let o=this.notesCell(e,t),n=this.findDigitInNotes(o,s),l=[];if(this.uniqueNotes(n)&&n.length==2&&(n.forEach(u=>{let c=u.notes.concat();c.splice(c.indexOf(s),1),o.forEach(a=>{this.identical(a.notes,c)&&(a.row==u.row||a.column==u.column)&&l.push(u)})}),l.length==1)){let u=l[0].row,c=l[0].column;n.forEach(a=>{(a.row!=u||a.column!=c)&&a.notes.length>1&&(a.notes=[s])})}}return e}isValid(e){let t=!0;return e.forEach(s=>{let o=this.getTile(s.row,s.column);s.notes.length==0&&typeof o.index!="number"&&(t=!1)}),t}unsetCell(e){this.getCell(e).forEach(s=>{s.index=""})}setCell(e){let t=this.getCell(e),s=[0,1,2,3,4,5,6,7,8],o=[],n=-1,l=0;l=0;let u=0;for(o=s.concat();o.length>0&&u<200;)if(n=Math.round(Math.random()*8),u++,typeof o[n]!="undefined"&&typeof t[l]!="undefined"&&this.isPossible(t[l],o[n],this.makeNotes())){let c=t[l++];c.index=o[n],o.splice(n,1)}return u<200}removeIndex(){let e=-1,t=-1,s=null,o="";for(;;)if(e=Math.round(Math.random()*8+1),t=Math.round(Math.random()*8+1),s=this.getTile(e,t),o="",typeof s.index=="number"){o=s.index,s.index="";break}return{row:e,col:t,index:o}}makeHints(e,t){let s=[],o=!0;for(let n=0;n<e;n++)s.push(this.removeIndex());return this.makeNotes(),(this.difficulty>t+.5||this.difficulty<t)&&s.forEach(n=>{let l=this.getTile(n.row,n.col);l.index=n.index,o=!1}),o}generate(e=1){for(let l=0;l<9;l++)this.unsetCell(l);let t=0,s=0;for(let l=0;l<9;l++)for(t=0;!this.setCell(l)&&t++<200;)this.unsetCell(l);let o=[28,26,24,22],n=81-o[e-1];for(;s++<200&&!this.makeHints(n,e););return s>198&&this.generate(e),this.tiles.forEach(l=>{typeof l.index=="number"&&(l.initialValue=!0)}),this.tiles}getNote(e,t,s){let o=null;return e.forEach(n=>{n.row==t&&n.column==s&&(o=n)}),o}isPossible(e,t,s){return this.getNote(s,e.row,e.column).notes.indexOf(t)>-1}notesCell(e,t){let s=[];return e.forEach(o=>{o.cell==t&&(s=s.concat(o))}),s}notesRow(e,t){let s=[];return e.forEach(o=>{o.row==t&&(s=s.concat(o))}),s}notesCol(e,t){let s=[];return e.forEach(o=>{o.column==t&&(s=s.concat(o))}),s}unsetOthers(e,t){e.forEach(s=>{s.row==t.row&&s.column==t.column?s.notes=[t.index]:(t.cell==s.cell&&s.notes.indexOf(t.index)>-1||t.row==s.row&&s.notes.indexOf(t.index)>-1||t.row==s.row&&s.notes.indexOf(t.index)>-1)&&s.notes.splice(s.notes.indexOf(t.index),1)})}allOnRow(e){let t=null;return e.forEach(s=>{s.notes.forEach(o=>{typeof t=="object"?t=s.row:t!=s.row?t=-1:t>-1&&(t=s.row)})}),typeof t=="object"?-1:t}allOnColumn(e){let t=null;return e.forEach(s=>{s.notes.forEach(o=>{typeof t=="object"?t=s.column:t!=s.column?t=-1:t>-1&&(t=s.column)})}),typeof t=="object"?-1:t}findDigitInNotes(e,t){let s=[];return e.forEach(o=>{o.notes.indexOf(t)>-1&&s.push(o)}),s}findIndentical(e){let t=[];return e.forEach((s,o)=>{e.forEach((n,l)=>{this.identical(s.notes,n.notes)&&l<o&&!this.contains(t,s)&&(t.push(s),t.push(n))})}),t}contains(e,t){return typeof e.find(o=>{if(o.row==t.row&&o.column==t.column)return o})!="undefined"}found(e){let t=[];return e.forEach(s=>{s.notes.length==1&&t.push(s)}),t}missing(e){let t=[0,1,2,3,4,5,6,7,8];return e.forEach(s=>{typeof s.index=="number"&&t.splice(t.indexOf(s.index),1)}),t}occurences(e,t){let s=0;return e.forEach(o=>{o.notes.forEach(n=>{n===t&&s++})}),s}identical(e,t){let s=[];return e.forEach(o=>{s.push(o)}),t.forEach(o=>{s.indexOf(o)>-1?s.splice(s.indexOf(o),1):s.push(null)}),s.length===0}notTaken(e){let t=[0,1,2,3,4,5,6,7,8];return e.forEach(s=>{typeof s.index=="number"&&t.splice(t.indexOf(s.index),1)}),t}removeFromCell(e,t,s,o){e.forEach(n=>{typeof t=="number"?n.row!=t&&this.removeFromArray(n.notes,o):typeof s=="number"&&n.column!=s&&this.removeFromArray(n.notes,o)})}removeFromArray(e,t){t.forEach(s=>{e.indexOf(s)>-1&&e.splice(e.indexOf(s),1)})}unique(e,t){return this.occurences(e,t)===1}uniqueNotes(e){let t=!0;return e.forEach((s,o)=>{e.forEach((n,l)=>{l<o&&this.identical(s.notes,n.notes)&&(t=!1)})}),t}getDifficulty(){return this.isValid(this.notes)?this.difficulty:-1}getNotes(){return this.notes}}var Y={sudoku:X};const Z={data(){return{cell:null,row:null,column:null,index:"",notes:[],isInitialValue:!1,selected:!1,className:""}},props:["set","mode","toggleModeMakeNotes"],mounted(){let i=this.$el,e=new E.Manager(i),t=new E.Press({time:500});e.add(t),e.on("press",s=>{this.mode>0&&this.index==""&&(this.selected=!0,this.toggleModeMakeNotes())}),document.querySelector("body").addEventListener("keyup",s=>{this.selected&&(isNaN(s.key)?this.$emit("keyboardInput",s.key.toUpperCase()):this.$emit("keyboardInput",parseInt(s.key)))})}},Q={key:0},ee={key:1},te={key:2},se={key:3},oe={key:4},ie={key:5},ne={key:6},le={key:7},re={key:8},ue={key:9},ce={key:10},ae={key:11},he={key:12},de={key:13},fe={key:14},me={key:15},ge={key:16},ve={key:17};function xe(i,e,t,s,o,n){return typeof o.index=="number"?(h(),d("div",{key:0,class:C({index0:o.index==0,index1:o.index==1,index2:o.index==2,index3:o.index==3,index4:o.index==4,index5:o.index==5,index6:o.index==6,index7:o.index==7,index8:o.index==8,number:!0,selected:o.selected,initialValue:o.isInitialValue,"full-cell":o.className=="fullcell","full-row":o.className=="fullrow","full-column":o.className=="fullcolumn"})},[r("div",null,v(t.set[o.index]),1)],2)):(h(),d("div",{key:1,class:C({number:!0,notes:!0,selected:o.selected})},[o.notes.indexOf(0)>-1?(h(),d("span",Q,v(t.set[0]),1)):(h(),d("span",ee,"\xA0")),o.notes.indexOf(1)>-1?(h(),d("span",te,v(t.set[1]),1)):(h(),d("span",se,"\xA0")),o.notes.indexOf(2)>-1?(h(),d("span",oe,v(t.set[2]),1)):(h(),d("span",ie,"\xA0")),o.notes.indexOf(3)>-1?(h(),d("span",ne,v(t.set[3]),1)):(h(),d("span",le,"\xA0")),o.notes.indexOf(4)>-1?(h(),d("span",re,v(t.set[4]),1)):(h(),d("span",ue,"\xA0")),o.notes.indexOf(5)>-1?(h(),d("span",ce,v(t.set[5]),1)):(h(),d("span",ae,"\xA0")),o.notes.indexOf(6)>-1?(h(),d("span",he,v(t.set[6]),1)):(h(),d("span",de,"\xA0")),o.notes.indexOf(7)>-1?(h(),d("span",fe,v(t.set[7]),1)):(h(),d("span",me,"\xA0")),o.notes.indexOf(8)>-1?(h(),d("span",ge,v(t.set[8]),1)):(h(),d("span",ve,"\xA0"))],2))}var _e=x(Z,[["render",xe]]);const ye={data(){return{editSet:!1}},props:["value","move","set","mode","index","changeSet"],methods:{doMove(){this.$props.move(this.set[this.index])},allowedInSet(i){return i.match(/[a-zA-Z1-9]/)&&this.set.indexOf(i)==-1&&(isNaN(i)||this.set.indexOf(parseInt(i))==-1)},change(i){this.allowedInSet(i.srcElement.value)&&this.changeSet(this.index,i.srcElement.value.toUpperCase()),this.editSet=!1}},mounted(){let i=this.$el,e=new E.Manager(i),t=new E.Press({time:500});e.add(t),e.on("press",s=>{this.mode==0&&(this.editSet=!this.editSet,F(()=>{this.$el.querySelector("input").focus()}))})}};function pe(i,e,t,s,o,n){return h(),d("div",null,[o.editSet?(h(),d("input",{key:1,type:"text",onKeyup:e[1]||(e[1]=(...l)=>n.change&&n.change(...l)),onKeydown:e[2]||(e[2]=P(l=>o.editSet=!1,["esc"])),onBlur:e[3]||(e[3]=l=>o.editSet=!1)},null,32)):(h(),d("button",{key:0,onClick:e[0]||(e[0]=g(l=>n.doMove(),["stop"]))},v(t.set[t.index]),1))])}var we=x(ye,[["render",pe]]);const ke={components:{Button:we},data(){return{}},props:["set","changeSet","move","mode"]};function Se(i,e,t,s,o,n){const l=y("Button");return h(),d("div",null,[m(l,{index:"0",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"1",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"2",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"3",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"4",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"5",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"6",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"7",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"]),m(l,{index:"8",mode:t.mode,move:t.move,set:t.set,changeSet:t.changeSet},null,8,["mode","move","set","changeSet"])])}var be=x(ke,[["render",Se]]),M="/Sudoku-MIT/img/exit.svg",U="/Sudoku-MIT/img/star.svg",Te="/Sudoku-MIT/img/looking-glass.svg",q="/Sudoku-MIT/img/new.svg",Ie="/Sudoku-MIT/img/magic-wand.svg";const Ce={props:["setDifficulty","generate","magicWand"],emits:["startTour","endTour","setDifficulty"],data(){return{showDialog:!1,difficulty:1,exitIconUrl:M,starIconUrl:U,tourIconUrl:Te,newIconUrl:q,magicWandUrl:Ie}},watch:{difficulty(i,e){let t=this.$el.querySelector(".rating");switch(e){case 1:t.classList.remove("one");break;case 2:t.classList.remove("two");break;case 3:t.classList.remove("three");break;case 4:t.classList.remove("four");break}switch(i){case 1:t.classList.add("one");break;case 2:t.classList.add("two");break;case 3:t.classList.add("three");break;case 4:t.classList.add("four");break}}},methods:{startTour(){this.$emit("startTour")},changeDifficulty(i){this.difficulty=i,this.$emit("setDifficulty",i)},generateSudoku(){setTimeout(()=>{this.generate()},1),this.hide()},startWithAutoNotes(){this.magicWand(),this.hide()},show(){this.showDialog=!0},hide(){this.showDialog=!1,this.$emit("endTour")}}},Ee={key:0,class:"dialog"},Ne={method:"dialog"},Me=r("legend",null,null,-1),Oe=["src"],Fe=r("div",{class:"logo"},"Sudoku / MIT",-1),Ue={class:"view"},qe={"tour-id":"13",class:"one rating"},De=["src"],Re=["src"],Pe=["src"],Ae=["src"],Le=r("div",{class:"type"},null,-1),ze={class:"menu"},Be=["src"],Ve=["src"],We=["src"];function $e(i,e,t,s,o,n){return o.showDialog?(h(),d("div",Ee,[r("form",Ne,[r("fieldset",null,[Me,r("div",null,[k(r("img",{class:"exit",src:o.exitIconUrl,onClick:e[0]||(e[0]=g(l=>n.hide(),["stop"]))},null,8,Oe),[[S,!1]]),Fe,r("div",Ue,[r("div",qe,[r("img",{class:"star",src:o.starIconUrl,onClick:e[1]||(e[1]=l=>n.changeDifficulty(1))},null,8,De),r("img",{class:"star",src:o.starIconUrl,onClick:e[2]||(e[2]=l=>n.changeDifficulty(2))},null,8,Re),r("img",{class:"star",src:o.starIconUrl,onClick:e[3]||(e[3]=l=>n.changeDifficulty(3))},null,8,Pe),r("img",{class:"star",src:o.starIconUrl,onClick:e[4]||(e[4]=l=>n.changeDifficulty(4))},null,8,Ae)]),Le,r("div",ze,[r("img",{"tour-id":"12",src:o.tourIconUrl,onClick:e[5]||(e[5]=g(l=>n.startTour(),["stop"]))},null,8,Be),r("img",{"tour-id":"14",src:o.newIconUrl,onClickOnce:e[6]||(e[6]=l=>n.generateSudoku())},null,40,Ve),r("img",{"tour-id":"15",src:o.magicWandUrl,onClick:e[7]||(e[7]=g(l=>n.startWithAutoNotes(),["stop"]))},null,8,We)])])])])])])):N("",!0)}var je=x(Ce,[["render",$e]]);const He={props:["magic-wand"],data(){return{showDialog:!1,exitIconUrl:M}},methods:{show(){this.showDialog=!0},hide(){this.showDialog=!1}}},Ke={key:0,class:"dialog"},Ge={method:"dialog"},Je=r("legend",null,null,-1),Xe=["src"],Ye=r("h1",null,"Solved!",-1);function Ze(i,e,t,s,o,n){return o.showDialog?(h(),d("div",Ke,[r("form",Ge,[r("fieldset",null,[Je,r("div",null,[r("img",{"data-ref":"cancel",class:"exit",src:o.exitIconUrl,onClick:e[0]||(e[0]=g(l=>n.hide(),["stop"]))},null,8,Xe),Ye])])])])):N("",!0)}var Qe=x(He,[["render",Ze]]);const et={components:{Tile:_e,Numbers:be,StartDialog:je,FinishedDialog:Qe},emits:["startTour","endTour","difficulty","solved","restore","startPlay"],data(){return{selectedTile:null,canMakeNotes:!1,index:0,startPlayIndex:0,set:[1,2,3,4,5,6,7,8,9],game:[{board:[],notes:[],columnsFull:[],rowsFull:[],cellsFull:[]}],autoNotes:!1,sudoku:Y,difficulty:1}},props:["theme","mode","toggleModeMakeNotes","settings","changeScreen"],watch:{index(i){this.syncBoard(this.game,i),this.selectedTile&&this.afterMove(this.selectedTile)}},mounted(){this.$refs.tile.forEach((i,e)=>{i.cell=this.indexToCell(e),i.row=this.indexToRow(e),i.column=this.indexToCol(e)}),this.$refs.start.show()},methods:{onStartTour(){this.$emit("startTour")},onEndTour(){this.$emit("endTour")},syncBoard(i,e){if(this.setValues(i[e].board),this.autoNotes){let t=new this.sudoku.sudoku(this.getTiles());this.$emit("difficulty",t.getDifficulty()),i[e].notes=t.getNotes()}this.setNotes(i[e].notes)},onSetDifficulty(i){this.difficulty=i},generateSudoku(){var i=new Worker("/Sudoku-MIT/assets/generate.c8c30813.js",{type:"module"});i.onmessage=e=>{this.game[this.index].board=e.data.tiles,this.syncBoard(this.game,this.index),this.$emit("difficulty",e.data.d),this.$emit("startPlay",!0)},i.postMessage({tiles:this.getTiles(),d:this.difficulty}),this.changeScreen("pauze")},startWithAutoNotes(){this.autoNotes=!0},indexToCell(i){return Math.floor(i/9)},indexToRow(i){return Math.floor(i/3)%3+Math.floor(Math.floor(i/9)/3)*3+1},indexToCol(i){return i%3+Math.floor(i/9)%3*3+1},cellRowColToIndex(i,e,t){return i*9+(3*e+t)},rowColToIndex(i,e){return(i-1)%3*3+Math.floor((i-1)/3)*27+Math.floor((e-1)/3)*9+(e-1)%3},cellRowColumnToRowColumn(i,e,t){let s=e+1+Math.floor(i/3)*3,o=t+1+i%3*3;return{row:s,column:o}},cell(i){let e=[];for(let t=0;t<3;t++)for(let s=0;s<3;s++)e.push(this.$refs.tile[this.cellRowColToIndex(i,t,s)]);return e},row(i){let e=[];for(let t=1;t<10;t++)e.push(this.$refs.tile[this.rowColToIndex(i,t)]);return e},column(i){let e=[];for(let t=1;t<10;t++)e.push(this.$refs.tile[this.rowColToIndex(t,i)]);return e},getTiles(){let i=[];return this.$refs.tile.forEach(e=>{i.push({cell:e.cell,row:e.row,column:e.column,index:e.index})}),i},taken(i){let e=[];return i.forEach(t=>{typeof t.index=="number"&&e.push(t.index)}),e.length},isFull(i){return this.taken(i)==9},beforeMove(i,e){let t=[],s=!0;return t=t.concat(this.cell(i.cell),this.row(i.row),this.column(i.column)),t.forEach(o=>{typeof o.index=="number"&&o.index==e&&(s=!1),o.row==i.row&&o.column==i.column&&o.initialValue&&this.mode!=0&&(s=!1)}),s},playSound(i){var e=new A.Howl({src:["snds/"+i]});this.settings.audio&&e.play()},afterMove(i){let e=this.cell(i.cell),t=!1;this.isFull(e)&&this.game[this.index].cellsFull.indexOf(i.cell)==-1&&(this.animateFullCell(i.cell),this.game[this.index].cellsFull.push(i.cell),t=!0),e=this.row(i.row),this.isFull(e)&&this.game[this.index].rowsFull.indexOf(i.row)==-1&&(this.animateFullRow(i.row),this.game[this.index].rowsFull.push(i.row),t=!0),e=this.column(i.column),this.isFull(e)&&this.game[this.index].columnsFull.indexOf(i.column)==-1&&(this.animateFullColumn(i.column),this.game[this.index].columnsFull.push(i.column),t=!0),t&&(this.game[this.index].cellsFull.length==9?(this.$emit("solved",!0),this.playSound("triangle-3x.mp3"),this.$refs.finished.show()):this.playSound("triangle.mp3"))},animateFullCell(i){this.cell(i).forEach(t=>{t.className="fullcell"})},animateFullRow(i){this.row(i).forEach(t=>{t.className="fullrow"})},animateFullColumn(i){this.column(i).forEach(t=>{t.className="fullcolumn"})},removeFromNotes(i,e,t){t.forEach(s=>{s.row!=i.row&&s.column!=i.column&&s.notes.length>0,s.notes.splice(s.notes.indexOf(e),1)})},updateNotes(i,e){this.removeFromNotes(i,e,this.cell(i.cell)),this.removeFromNotes(i,e,this.row(i.row)),this.removeFromNotes(i,e,this.column(i.column))},moveRowCol(i,e,t,s){this.$refs.tile[this.rowColToIndex(i,e)].index=t,this.$refs.tile[this.rowColToIndex(i,e)].isInitialValue=s,this.$refs.tile[this.rowColToIndex(i,e)].className=""},addNotesRowCol(i,e,t){this.$refs.tile[this.rowColToIndex(i,e)].notes=t},setSelectedTile(i,e,t){this.selectedTile={cell:i,row:e,column:t}},unsetSelectedTile(){this.unselectAll(),this.selectedTile=null},keyboardInput(i){this.set.indexOf(i)>-1&&this.move(i)},move(i){if(this.selectedTile){if(!this.beforeMove(this.selectedTile,this.set.indexOf(i)))return;this.game.length>this.index+1&&this.game.splice(this.index+1);let e=this.game.concat(),t=e[this.index].board.concat(),s=e[this.index].notes.concat(),o=e[this.index].cellsFull.concat(),n=e[this.index].rowsFull.concat(),l=e[this.index].columnsFull.concat();e.push({board:t,notes:s,cellsFull:o,rowsFull:n,columnsFull:l});let u=this.index+1;if(this.mode==2){let c=[];s.forEach(a=>{a.row==this.selectedTile.row&&a.column==this.selectedTile.column&&(c=a.notes.concat())}),c.indexOf(this.set.indexOf(i))==-1?c.push(this.set.indexOf(i)):c.splice(c.indexOf(this.set.indexOf(i)),1),c.sort(),e[u].notes.push({row:this.selectedTile.row,column:this.selectedTile.column,cell:this.selectedTile.cell,notes:c})}else e[u].board.push({row:this.selectedTile.row,column:this.selectedTile.column,cell:this.selectedTile.cell,index:this.set.indexOf(i),initialValue:this.mode==0}),this.updateNotes(this.selectedTile,this.set.indexOf(i)),this.unselectAll();this.game=e,this.index=this.game.length-1}},select(i,e,t){let s=this.cellRowColumnToRowColumn(i,e,t);this.setSelectedTile(i,s.row,s.column),this.unselectAll(),this.$refs.tile[this.cellRowColToIndex(i,e,t)].selected=!0,this.$refs.tile[this.cellRowColToIndex(i,e,t)].index==""?this.canMakeNotes=!0:this.canMakeNotes=!1},unselectAll(){this.$refs.tile.forEach(i=>{i.selected=!1})},clearBoard(){for(let i=1;i<10;i++)for(let e=1;e<10;e++)this.moveRowCol(i,e,"")},clearNotes(){for(let i=1;i<10;i++)for(let e=1;e<10;e++)this.addNotesRowCol(i,e,[])},setValues(i){this.clearBoard(),i.forEach(e=>{this.moveRowCol(e.row,e.column,e.index,e.initialValue)})},setNotes(i){this.clearNotes(),i.forEach(e=>{this.addNotesRowCol(e.row,e.column,e.notes)})},changeSet(i,e){i>-1&&i<this.set.length&&(this.set[i]=e)},back(){this.index>0&&this.index--},forward(){this.index<this.game.length-1&&this.index++},play(){this.startPlayIndex=this.index},refresh(){this.index=this.startPlayIndex},backup(i){let e={index:this.index,startPlayIndex:this.startPlayIndex,set:this.set,game:this.game,time:i};localStorage.setItem("backup",JSON.stringify(e))},restore(){let i={},e=localStorage.getItem("backup");e&&(i=JSON.parse(e),this.game=i.game,this.set=i.set,this.startPlayIndex=i.startPlayIndex,this.index==i.index?this.syncBoard(this.game,this.index):this.index=i.index,this.$emit("restore",i.time))}}},tt={class:"board"},st={class:"row"},ot={class:"cell"},it={class:"cellrow"},nt=["onClick"],lt={"tour-id":"8",class:"buttons"};function rt(i,e,t,s,o,n){const l=y("StartDialog"),u=y("FinishedDialog"),c=y("Tile"),a=y("Numbers");return h(),d(_,null,[m(l,{ref:"start",onSetDifficulty:n.onSetDifficulty,generate:n.generateSudoku,"magic-wand":n.startWithAutoNotes,onStartTour:n.onStartTour,onEndTour:n.onEndTour},null,8,["onSetDifficulty","generate","magic-wand","onStartTour","onEndTour"]),m(u,{ref:"finished"},null,512),r("div",{onClick:e[0]||(e[0]=f=>(n.unsetSelectedTile(),n.onEndTour())),"tour-id":"board"},[r("div",tt,[(h(),d(_,null,b([0,1,2],f=>r("div",st,[(h(),d(_,null,b([0,1,2],p=>r("div",ot,[(h(),d(_,null,b([0,1,2],w=>r("div",it,[(h(),d(_,null,b([0,1,2],T=>r("div",{class:C({"make-notes":t.mode==2&&o.canMakeNotes}),onClick:g(O=>n.select(3*f+p,w,T),["stop"])},[m(c,{ref_for:!0,ref:"tile",set:o.set,mode:t.mode,onKeyboardInput:n.keyboardInput,toggleModeMakeNotes:t.toggleModeMakeNotes},null,8,["set","mode","onKeyboardInput","toggleModeMakeNotes"])],10,nt)),64))])),64))])),64))])),64))]),r("div",lt,[m(a,{set:o.set,move:n.move,mode:t.mode,changeSet:n.changeSet},null,8,["set","move","mode","changeSet"])])])],64)}var ut=x(et,[["render",rt]]),ct="/Sudoku-MIT/img/audio.svg",at="/Sudoku-MIT/img/audio-off.svg",ht="/Sudoku-MIT/img/theme-black.svg",dt="/Sudoku-MIT/img/theme-blue.svg";const ft={props:["changeScreen","changeTheme","toggleAudio","settings"],data(){return{exitIconUrl:M,audioIconUrl:ct,audioOffIconUrl:at,themeBlackIconUrl:ht,themeBlueIconUrl:dt}}},mt=["src"],gt={class:"options"},vt=["src"],xt=["src"],_t={class:"options"},yt=["src"],pt=["src"];function wt(i,e,t,s,o,n){return h(),d(_,null,[r("div",{class:"exit",onClick:e[0]||(e[0]=g(l=>t.changeScreen("game"),["stop"]))},[r("img",{src:o.exitIconUrl},null,8,mt)]),r("div",null,[r("div",gt,[k(r("img",{src:o.audioIconUrl,onClick:e[1]||(e[1]=g(l=>t.toggleAudio(),["stop"]))},null,8,vt),[[S,t.settings.audio]]),k(r("img",{src:o.audioOffIconUrl,onClick:e[2]||(e[2]=g(l=>t.toggleAudio(),["stop"]))},null,8,xt),[[S,t.settings.audio==!1]])]),r("div",_t,[k(r("img",{src:o.themeBlackIconUrl,onClick:e[3]||(e[3]=l=>t.changeTheme("black"))},null,8,yt),[[S,t.settings.theme=="default"]]),k(r("img",{src:o.themeBlueIconUrl,onClick:e[4]||(e[4]=l=>t.changeTheme("default"))},null,8,pt),[[S,t.settings.theme=="black"]])])])],64)}var D=x(ft,[["render",wt],["__scopeId","data-v-596d15cb"]]),kt="/Sudoku-MIT/img/back.svg",St="/Sudoku-MIT/img/forward.svg",bt="/Sudoku-MIT/img/refresh.svg",Tt="/Sudoku-MIT/img/play.svg",It="/Sudoku-MIT/img/pauze.svg",Ct="/Sudoku-MIT/img/hamburger.svg",Et="/Sudoku-MIT/img/pencil.svg",Nt="/Sudoku-MIT/img/backup.svg",Mt="/Sudoku-MIT/img/restore.svg";const Ot={components:{Tour:J,Board:ut,Settings:D},data(){return{mode:0,pauzed:!1,d:null,t:0,time:"00:00:00",t1:null,backIconUrl:kt,forwardIconUrl:St,newIconUrl:q,refreshIconUrl:bt,playIconUrl:Tt,pauzeIconUrl:It,hamurgerIconUrl:Ct,starIconUrl:U,pencilIconUrl:Et,backupIconUrl:Nt,restoreIconUrl:Mt}},watch:{mode(i,e){i==1&&e==0&&(clearInterval(this.t1),this.t1=setInterval(this.updateTime,1e3))},pauzed(i){i?clearInterval(this.t1):this.t1=setInterval(this.updateTime,1e3)}},methods:{onStartTour(){this.$refs.tour.initTour(11)},onEndTour(){this.$refs.tour.hide()},onSolved(i){i&&clearInterval(this.t1)},onRestore(i){this.t=i},onDifficulty(i){this.d=i},toggleModeMakeNotes(){this.mode==1&&this.$refs.board.canMakeNotes?this.mode=2:this.mode==2&&(this.mode=1)},updateTime(){this.t++,this.time=this.formatSeconds(this.t)},formatSeconds(i){var e=Math.floor(i/3600),t=Math.floor((i-e*3600)/60),s=i-e*3600-t*60;return e<10&&(e="0"+e),t<10&&(t="0"+t),s<10&&(s="0"+s),e+":"+t+":"+s},start(){document.location.reload()},play(){this.changeScreen("game"),this.mode==0?(this.mode=1,this.$refs.board.play(),this.pauzed=!1):this.mode==1&&(this.pauzed=!1)},pauze(){this.pauzed=!0,this.changeScreen("pauze")},back(){this.$refs.board.back()},forward(){this.$refs.board.forward()},refresh(){this.$refs.board.refresh()},backup(){this.$refs.board.backup(this.t),this.changeScreen("pauze")},restore(){this.$refs.board.restore(),this.mode=1}},props:["changeScreen","settings"]},Ft={class:"top-menu"},Ut=["src"],qt=["src"],Dt=["src"],Rt=["src"],Pt=["src"],At=["src"],Lt={class:"score"},zt=["src"],Bt={class:"bottom-menu"},Vt=["src"],Wt=["src"],$t=["src"];function jt(i,e,t,s,o,n){const l=y("Tour"),u=y("Board");return h(),d(_,null,[m(l,{ref:"tour"},null,512),r("div",null,[r("div",Ft,[r("div",null,[r("img",{"tour-id":"1",src:o.backIconUrl,onClick:e[0]||(e[0]=g(c=>n.back(),["stop"]))},null,8,Ut)]),r("div",null,[r("img",{"tour-id":"2",src:o.forwardIconUrl,onClick:e[1]||(e[1]=c=>n.forward())},null,8,qt)]),r("div",null,[r("img",{"tour-id":"3",src:o.newIconUrl,onClick:e[2]||(e[2]=c=>n.start())},null,8,Dt)]),r("div",null,[r("img",{"tour-id":"4",src:o.refreshIconUrl,onClick:e[3]||(e[3]=c=>n.refresh())},null,8,Rt)]),N("",!0),r("div",null,[r("img",{"tour-id":"6",src:o.pauzeIconUrl,class:C({grayed:o.mode==0}),onClick:e[5]||(e[5]=g((...c)=>n.pauze&&n.pauze(...c),["stop"]))},null,10,Pt)]),r("div",null,[r("img",{"tour-id":"7",src:o.hamurgerIconUrl,onClick:e[6]||(e[6]=g(c=>t.changeScreen("settings"),["stop"]))},null,8,At)])]),r("div",Lt,[r("div",null,[o.d>-1?(h(!0),d(_,{key:0},b(o.d,c=>(h(),d("img",{src:o.starIconUrl},null,8,zt))),256)):N("",!0)]),r("div",null,v(o.time),1)]),m(u,{ref:"board",mode:o.mode,settings:t.settings,toggleModeMakeNotes:n.toggleModeMakeNotes,changeScreen:t.changeScreen,onStartTour:n.onStartTour,onEndTour:n.onEndTour,onDifficulty:n.onDifficulty,onSolved:n.onSolved,onRestore:n.onRestore,onStartPlay:n.play},null,8,["mode","settings","toggleModeMakeNotes","changeScreen","onStartTour","onEndTour","onDifficulty","onSolved","onRestore","onStartPlay"]),r("div",Bt,[r("img",{"tour-id":"9",src:o.pencilIconUrl,class:C({grayed:o.mode==0}),onClick:e[7]||(e[7]=g(c=>n.toggleModeMakeNotes(),["stop"]))},null,10,Vt),r("img",{"tour-id":"10",src:o.backupIconUrl,onClick:e[8]||(e[8]=c=>n.backup())},null,8,Wt),r("img",{"tour-id":"11",src:o.restoreIconUrl,onClick:e[9]||(e[9]=c=>n.restore())},null,8,$t)])])],64)}var Ht=x(Ot,[["render",jt]]);const Kt={props:["changeScreen"],data(){return{t1:null,m:0,square:[[6,7,2,1,5,9,8,3,4],[2,9,4,7,5,3,6,1,8],[4,3,8,9,5,1,2,7,6],[8,1,6,2,5,7,4,9,2]],exitIconUrl:M}},mounted(){this.t1=setInterval(()=>{this.m++,this.m%=4},1e3)},unmounted(){clearInterval(this.t1)}},Gt=["src"],Jt={class:"square"},Xt={class:"tile"};function Yt(i,e,t,s,o,n){return h(),d(_,null,[r("div",{class:"exit",onClick:e[0]||(e[0]=g(l=>t.changeScreen("game"),["stop"]))},[r("img",{src:o.exitIconUrl},null,8,Gt)]),r("div",Jt,[(h(),d(_,null,b(9,l=>r("div",Xt,v(o.square[o.m][l-1]),1)),64))])],64)}var Zt=x(Kt,[["render",Yt],["__scopeId","data-v-4510118f"]]);const Qt={components:{Game:Ht,Settings:D,Pauze:Zt},data(){return{themes:["default","black"],screen:"game",settings:{audio:!0,theme:"default"}}},beforeMount(){this.readSettings(),this.applyTheme(this.settings.theme)},methods:{changeScreen(i){this.screen=i,F(()=>{this.$refs.game&&i=="game"&&(this.$refs.game.pauzed=!1)})},applyTheme(i){this.themes.forEach(e=>{document.querySelector("body").classList.remove(e)}),document.querySelector("body").classList.add(i)},changeTheme(i){this.settings.theme=i,this.saveSettings(),this.applyTheme(i)},toggleAudio(){this.settings.audio=!this.settings.audio,this.saveSettings()},saveSettings(){localStorage.setItem("settings",JSON.stringify(this.settings))},readSettings(){let i=localStorage.getItem("settings");i&&(this.settings=JSON.parse(i))}}};function es(i,e,t,s,o,n){const l=y("Settings"),u=y("Pauze"),c=y("Game");return h(),I(L,null,[o.screen=="settings"?(h(),I(l,{key:0,changeScreen:n.changeScreen,changeTheme:n.changeTheme,settings:o.settings,toggleAudio:n.toggleAudio},null,8,["changeScreen","changeTheme","settings","toggleAudio"])):o.screen=="pauze"?(h(),I(u,{key:1,changeScreen:n.changeScreen},null,8,["changeScreen"])):(h(),I(c,{key:2,ref:"game",changeScreen:n.changeScreen,settings:o.settings},null,8,["changeScreen","settings"]))],1024)}var ts=x(Qt,[["render",es]]);const ss={setup(i){return(e,t)=>(h(),I(ts))}};z(ss).mount("#app");
